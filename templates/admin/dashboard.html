<script>htall.include('layout/layout.html')</script>

<div id="extend">
  <div class="container-fluid">
    <div class="row">
      <a href="adminperformance" class="col-12 col-sm-6">
        <div class="info-box">
          <span class="info-box-icon bg-info elevation-1"><i class="fas fa-chart-line"></i></span>

          <div class="info-box-content">
            <span class="info-box-text">Performance</span>
          </div>
        </div>
      </a>
      <!-- <a href="adminperformance" class="col-12 col-sm-6">
        <div class="info-box mb-3">
          <span class="info-box-icon bg-danger elevation-1"><i class="fas fa-chart-line"></i></span>

          <div class="info-box-content">
            <span class="info-box-text">Performance</span>
          </div>
        </div>
      </a> -->
      <div class="clearfix hidden-md-up"></div>

      <a href="importgrade" class="col-12 col-sm-6">
        <div class="info-box mb-3">
          <span class="info-box-icon bg-success elevation-1"><i class="fas fa-file-import"></i></span>

          <div class="info-box-content">
            <span class="info-box-text">Import grades</span>
          </div>
        </div>
      </a>
    </div>
    
    <div class="row">
      <div class="col-md-12">
        <div class="card">
          <div class="card-body">
            <div class="row">
              <div class="col-md-12">
                <p class="text-center">
                  <strong>Examiners</strong>
                </p>

                <div class="chart">
                  <canvas id="salesChart" height="300"></canvas>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="bootstrap/chart.js/chart.min.js"></script>
  <script>
      $(function () {
        var dashboard = htall.getData({
          url: 'route/adminDashboard',
          type: 'post'
        }),
        mock = 0,
        entrance = 0,
        mocktotal = 0,
        entrancetotal = 0,
        label = dashboard.year,
        data = dashboard.count,
        entrancedata = []
        console.log(dashboard)
        for(var i = 0; i < Object.keys(dashboard).length ;i++){
          // var year = dashboard[i].year
        }
        // for(var i = 0; i < Object.keys(dashboard).length ;i++){
        //   var date = new Date(dashboard[i].register_date)
        //   var year = date.getFullYear()
        //   if(label.length == 0){
        //     label.push(year)
        //     data.push(1)
        //   }else
        //     for(var j = 0; j < label.length ;j++){
        //       if(label[j] == year){
        //       }else{
        //         if(j+1 == label.length){
        //           label.push(year)
        //           data.push(1)
        //         }
        //       }
        //     }
        //   if(dashboard[i].mock_exam != 0) mocktotal++
        //   if(dashboard[i].entrance_exam != 0) entrancetotal++
        // }
  
        // console.log("dashboard : "+label)
        // $("#mocklabel").html("<b>"+mock+"/</b>"+mocktotal)
        // $("#suastlabel").html("<b>"+entrance+"/</b>"+entrancetotal)
        // $("#mock").css('width',(mock/mocktotal)*100+"%")
        // $("#suast").css('width',(entrance/entrancetotal)*100+"%")
  
        
        var salesChartCanvas = $('#salesChart').get(0).getContext('2d')
          
        var salesChartData = {
          labels: label,
          datasets: [
            {
              label: 'Mock Exam',
              backgroundColor: 'rgba(60,141,188,0.9)',
              borderColor: 'rgba(60,141,188,0.8)',
              pointRadius: false,
              pointColor: '#3b8bba',
              pointStrokeColor: 'rgba(60,141,188,1)',
              pointHighlightFill: '#fff',
              pointHighlightStroke: 'rgba(60,141,188,1)',
              data: data
            }
          ]
        }
  
        var salesChartOptions = {
          maintainAspectRatio: false,
          responsive: true,
          legend: {
            display: false
          },
          scales: {
            xAxes: [{
              gridLines: {
                display: false
              }
            }],
            yAxes: [{
              gridLines: {
                display: false
              }
            }]
          }
        }
  
        var salesChart = new Chart(salesChartCanvas, {
          type: 'line',
          data: salesChartData,
          options: salesChartOptions
        })
      })
  
  </script>
</div>